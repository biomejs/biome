---
source: crates/biome_css_parser/tests/spec_test.rs
expression: snapshot
---
## Input

```css
/* .missing-colon { */
/* 	color: if(style(--foo: bar) black); */
/* } */
/**/
/* .empty-condition { */
/* 	color: if(: black); */
/* } */
/**/
/* .unclosed-style { */
/* 	color: if(style(--foo: bar: black); */
/* } */
/**/
/* .invalid-style-query { */
/* 	color: if(style(not a valid query): black); */
/* } */
/**/
/* .double-not { */
/* 	color: if(not not(--style: black): black;); */
/* } */
/**/
/* .double-not-and { */
/* 	color: if(not (style(--style: black) and not(--style: black)): black;); */
/* } */
/**/
/* .missing-open-paren { */
/* 	color: if style(--foo: bar): black;); */
/* } */
/**/
/* .missing-supports-paren { */
/* 	color: if(supports --foo: bar): black;); */
/* } */
/**/
/* .missing-media-close-paren { */
/* 	color: if(media(print: black;); */
/* } */
/**/
/* .missing-and-operand { */
/* 	color: if(style(--foo: bar) and: black;); */
/* } */
/**/
/* .missing-or-operand { */
/* 	color: if(style(--foo: bar) or: black;); */
/* } */
/**/
/* .invalid-else { */
/* 	color: if(style(--foo: bar): black; elsif: white;); */
/* } */
/**/
/* .multiple-semicolons { */
/* 	color: if(style(--foo: bar): black;;); */
/* } */
/**/
/* .missing-test-name { */
/* 	color: if((--foo: bar): black;); */
/* } */
/**/
/* .unknown-test { */
/* 	color: if(custom(--foo: bar): black;); */
/* } */
/**/
/* .incomplete-parens-expr { */
/* 	color: if((: black;); */
/* } */
/**/
/* .mixed-operators { */
/* 	color: if(style(--a: 1) and style(--b: 2) or style(--c: 3): black;); */
/* } */
/**/
/* .empty-else { */
/* 	color: if(style(--foo: bar): black; else); */
/* } */
/**/
/* .and-no-left { */
/* 	color: if(and style(--foo: bar): black;); */
/* } */
/**/
/* .or-no-left { */
/* 	color: if(or style(--foo: bar): black;); */
/* } */
/**/
/* .empty-if { */
/* 	color: if(); */
/* } */
/**/
/* .if-branch-list-recovery { */
/* 	a: if(style(--foo: bar): black; !bogus; else: white); */
/* 	a: if(style(--foo: bar): black; ???; else: white); */
/* } */

.todo {
	background: if(
		style(--foo: bar) and (!bogus): red;
		else: blue;
	)
}

```


## AST

```
CssRoot {
    bom_token: missing (optional),
    rules: CssRuleList [
        CssQualifiedRule {
            prelude: CssSelectorList [
                CssCompoundSelector {
                    nesting_selectors: CssNestedSelectorList [],
                    simple_selector: missing (optional),
                    sub_selectors: CssSubSelectorList [
                        CssClassSelector {
                            dot_token: DOT@0..1954 "." [Comments("/* .missing-colon { */"), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .empty-condition { */"), Newline("\n"), Comments("/* \tcolor: if(: black ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .unclosed-style { */"), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .invalid-style-que ..."), Newline("\n"), Comments("/* \tcolor: if(style(n ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .double-not { */"), Newline("\n"), Comments("/* \tcolor: if(not not ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .double-not-and { */"), Newline("\n"), Comments("/* \tcolor: if(not (st ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-open-pare ..."), Newline("\n"), Comments("/* \tcolor: if style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-supports- ..."), Newline("\n"), Comments("/* \tcolor: if(support ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-media-clo ..."), Newline("\n"), Comments("/* \tcolor: if(media(p ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-and-opera ..."), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-or-operan ..."), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .invalid-else { */"), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .multiple-semicolo ..."), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-test-name ..."), Newline("\n"), Comments("/* \tcolor: if((--foo: ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .unknown-test { */"), Newline("\n"), Comments("/* \tcolor: if(custom( ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .incomplete-parens ..."), Newline("\n"), Comments("/* \tcolor: if((: blac ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .mixed-operators { */"), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .empty-else { */"), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .and-no-left { */"), Newline("\n"), Comments("/* \tcolor: if(and sty ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .or-no-left { */"), Newline("\n"), Comments("/* \tcolor: if(or styl ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .empty-if { */"), Newline("\n"), Comments("/* \tcolor: if(); */"), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .if-branch-list-re ..."), Newline("\n"), Comments("/* \ta: if(style(--foo ..."), Newline("\n"), Comments("/* \ta: if(style(--foo ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Newline("\n")] [],
                            name: CssCustomIdentifier {
                                value_token: IDENT@1954..1959 "todo" [] [Whitespace(" ")],
                            },
                        },
                    ],
                },
            ],
            block: CssDeclarationOrRuleBlock {
                l_curly_token: L_CURLY@1959..1960 "{" [] [],
                items: CssDeclarationOrRuleList [
                    CssDeclarationWithSemicolon {
                        declaration: CssDeclaration {
                            property: CssBogusProperty {
                                items: [
                                    CssIdentifier {
                                        value_token: IDENT@1960..1972 "background" [Newline("\n"), Whitespace("\t")] [],
                                    },
                                    COLON@1972..1974 ":" [] [Whitespace(" ")],
                                    CssBogus {
                                        items: [
                                            CssIfFunction {
                                                if_token: IF_KW@1974..1976 "if" [] [],
                                                l_paren_token: L_PAREN@1976..1977 "(" [] [],
                                                css_if_branch_list: CssIfBranchList [
                                                    CssIfBranch {
                                                        condition: CssIfTestBooleanAndExpr {
                                                            left: CssIfStyleTest {
                                                                style_token: STYLE_KW@1977..1985 "style" [Newline("\n"), Whitespace("\t\t")] [],
                                                                l_paren_token: L_PAREN@1985..1986 "(" [] [],
                                                                test: CssDeclaration {
                                                                    property: CssGenericProperty {
                                                                        name: CssDashedIdentifier {
                                                                            value_token: IDENT@1986..1991 "--foo" [] [],
                                                                        },
                                                                        colon_token: COLON@1991..1993 ":" [] [Whitespace(" ")],
                                                                        value: CssGenericComponentValueList [
                                                                            CssIdentifier {
                                                                                value_token: IDENT@1993..1996 "bar" [] [],
                                                                            },
                                                                        ],
                                                                    },
                                                                    important: missing (optional),
                                                                },
                                                                r_paren_token: R_PAREN@1996..1998 ")" [] [Whitespace(" ")],
                                                            },
                                                            and_token: AND_KW@1998..2002 "and" [] [Whitespace(" ")],
                                                            right: CssIfTestBooleanExprInParens {
                                                                l_paren_token: L_PAREN@2002..2003 "(" [] [],
                                                                expression: missing (required),
                                                                r_paren_token: missing (required),
                                                            },
                                                        },
                                                        colon_token: missing (required),
                                                        value: CssGenericComponentValueList [],
                                                    },
                                                    missing separator,
                                                    CssBogusIfBranch {
                                                        items: [
                                                            BANG@2003..2004 "!" [] [],
                                                            IDENT@2004..2009 "bogus" [] [],
                                                        ],
                                                    },
                                                ],
                                                r_paren_token: R_PAREN@2009..2010 ")" [] [],
                                            },
                                            CssBogusPropertyValue {
                                                items: [
                                                    COLON@2010..2012 ":" [] [Whitespace(" ")],
                                                    IDENT@2012..2015 "red" [] [],
                                                ],
                                            },
                                        ],
                                    },
                                ],
                            },
                            important: missing (optional),
                        },
                        semicolon_token: SEMICOLON@2015..2016 ";" [] [],
                    },
                    CssDeclarationWithSemicolon {
                        declaration: CssDeclaration {
                            property: CssGenericProperty {
                                name: CssIdentifier {
                                    value_token: IDENT@2016..2023 "else" [Newline("\n"), Whitespace("\t\t")] [],
                                },
                                colon_token: COLON@2023..2025 ":" [] [Whitespace(" ")],
                                value: CssGenericComponentValueList [
                                    CssIdentifier {
                                        value_token: IDENT@2025..2029 "blue" [] [],
                                    },
                                ],
                            },
                            important: missing (optional),
                        },
                        semicolon_token: SEMICOLON@2029..2030 ";" [] [],
                    },
                    CssBogus {
                        items: [
                            R_PAREN@2030..2033 ")" [Newline("\n"), Whitespace("\t")] [],
                        ],
                    },
                ],
                r_curly_token: R_CURLY@2033..2035 "}" [Newline("\n")] [],
            },
        },
    ],
    eof_token: EOF@2035..2036 "" [Newline("\n")] [],
}
```

## CST

```
0: CSS_ROOT@0..2036
  0: (empty)
  1: CSS_RULE_LIST@0..2035
    0: CSS_QUALIFIED_RULE@0..2035
      0: CSS_SELECTOR_LIST@0..1959
        0: CSS_COMPOUND_SELECTOR@0..1959
          0: CSS_NESTED_SELECTOR_LIST@0..0
          1: (empty)
          2: CSS_SUB_SELECTOR_LIST@0..1959
            0: CSS_CLASS_SELECTOR@0..1959
              0: DOT@0..1954 "." [Comments("/* .missing-colon { */"), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .empty-condition { */"), Newline("\n"), Comments("/* \tcolor: if(: black ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .unclosed-style { */"), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .invalid-style-que ..."), Newline("\n"), Comments("/* \tcolor: if(style(n ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .double-not { */"), Newline("\n"), Comments("/* \tcolor: if(not not ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .double-not-and { */"), Newline("\n"), Comments("/* \tcolor: if(not (st ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-open-pare ..."), Newline("\n"), Comments("/* \tcolor: if style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-supports- ..."), Newline("\n"), Comments("/* \tcolor: if(support ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-media-clo ..."), Newline("\n"), Comments("/* \tcolor: if(media(p ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-and-opera ..."), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-or-operan ..."), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .invalid-else { */"), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .multiple-semicolo ..."), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .missing-test-name ..."), Newline("\n"), Comments("/* \tcolor: if((--foo: ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .unknown-test { */"), Newline("\n"), Comments("/* \tcolor: if(custom( ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .incomplete-parens ..."), Newline("\n"), Comments("/* \tcolor: if((: blac ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .mixed-operators { */"), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .empty-else { */"), Newline("\n"), Comments("/* \tcolor: if(style(- ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .and-no-left { */"), Newline("\n"), Comments("/* \tcolor: if(and sty ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .or-no-left { */"), Newline("\n"), Comments("/* \tcolor: if(or styl ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .empty-if { */"), Newline("\n"), Comments("/* \tcolor: if(); */"), Newline("\n"), Comments("/* } */"), Newline("\n"), Comments("/**/"), Newline("\n"), Comments("/* .if-branch-list-re ..."), Newline("\n"), Comments("/* \ta: if(style(--foo ..."), Newline("\n"), Comments("/* \ta: if(style(--foo ..."), Newline("\n"), Comments("/* } */"), Newline("\n"), Newline("\n")] []
              1: CSS_CUSTOM_IDENTIFIER@1954..1959
                0: IDENT@1954..1959 "todo" [] [Whitespace(" ")]
      1: CSS_DECLARATION_OR_RULE_BLOCK@1959..2035
        0: L_CURLY@1959..1960 "{" [] []
        1: CSS_DECLARATION_OR_RULE_LIST@1960..2033
          0: CSS_DECLARATION_WITH_SEMICOLON@1960..2016
            0: CSS_DECLARATION@1960..2015
              0: CSS_BOGUS_PROPERTY@1960..2015
                0: CSS_IDENTIFIER@1960..1972
                  0: IDENT@1960..1972 "background" [Newline("\n"), Whitespace("\t")] []
                1: COLON@1972..1974 ":" [] [Whitespace(" ")]
                2: CSS_BOGUS@1974..2015
                  0: CSS_IF_FUNCTION@1974..2010
                    0: IF_KW@1974..1976 "if" [] []
                    1: L_PAREN@1976..1977 "(" [] []
                    2: CSS_IF_BRANCH_LIST@1977..2009
                      0: CSS_IF_BRANCH@1977..2003
                        0: CSS_IF_TEST_BOOLEAN_AND_EXPR@1977..2003
                          0: CSS_IF_STYLE_TEST@1977..1998
                            0: STYLE_KW@1977..1985 "style" [Newline("\n"), Whitespace("\t\t")] []
                            1: L_PAREN@1985..1986 "(" [] []
                            2: CSS_DECLARATION@1986..1996
                              0: CSS_GENERIC_PROPERTY@1986..1996
                                0: CSS_DASHED_IDENTIFIER@1986..1991
                                  0: IDENT@1986..1991 "--foo" [] []
                                1: COLON@1991..1993 ":" [] [Whitespace(" ")]
                                2: CSS_GENERIC_COMPONENT_VALUE_LIST@1993..1996
                                  0: CSS_IDENTIFIER@1993..1996
                                    0: IDENT@1993..1996 "bar" [] []
                              1: (empty)
                            3: R_PAREN@1996..1998 ")" [] [Whitespace(" ")]
                          1: AND_KW@1998..2002 "and" [] [Whitespace(" ")]
                          2: CSS_IF_TEST_BOOLEAN_EXPR_IN_PARENS@2002..2003
                            0: L_PAREN@2002..2003 "(" [] []
                            1: (empty)
                            2: (empty)
                        1: (empty)
                        2: CSS_GENERIC_COMPONENT_VALUE_LIST@2003..2003
                      1: (empty)
                      2: CSS_BOGUS_IF_BRANCH@2003..2009
                        0: BANG@2003..2004 "!" [] []
                        1: IDENT@2004..2009 "bogus" [] []
                    3: R_PAREN@2009..2010 ")" [] []
                  1: CSS_BOGUS_PROPERTY_VALUE@2010..2015
                    0: COLON@2010..2012 ":" [] [Whitespace(" ")]
                    1: IDENT@2012..2015 "red" [] []
              1: (empty)
            1: SEMICOLON@2015..2016 ";" [] []
          1: CSS_DECLARATION_WITH_SEMICOLON@2016..2030
            0: CSS_DECLARATION@2016..2029
              0: CSS_GENERIC_PROPERTY@2016..2029
                0: CSS_IDENTIFIER@2016..2023
                  0: IDENT@2016..2023 "else" [Newline("\n"), Whitespace("\t\t")] []
                1: COLON@2023..2025 ":" [] [Whitespace(" ")]
                2: CSS_GENERIC_COMPONENT_VALUE_LIST@2025..2029
                  0: CSS_IDENTIFIER@2025..2029
                    0: IDENT@2025..2029 "blue" [] []
              1: (empty)
            1: SEMICOLON@2029..2030 ";" [] []
          2: CSS_BOGUS@2030..2033
            0: R_PAREN@2030..2033 ")" [Newline("\n"), Whitespace("\t")] []
        2: R_CURLY@2033..2035 "}" [Newline("\n")] []
  2: EOF@2035..2036 "" [Newline("\n")] []

```

## Diagnostics

```
if.css:92:26 parse ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  × expected `)` but instead found `!`
  
    90 │ .todo {
    91 │ 	background: if(
  > 92 │ 		style(--foo: bar) and (!bogus): red;
       │ 		                       ^
    93 │ 		else: blue;
    94 │ 	)
  
  i Remove !
  
if.css:92:33 parse ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  × Unexpected value or character.
  
    90 │ .todo {
    91 │ 	background: if(
  > 92 │ 		style(--foo: bar) and (!bogus): red;
       │ 		                              ^^^^^
    93 │ 		else: blue;
    94 │ 	)
  
  i Expected one of:
  
  - identifier
  - string
  - number
  - dimension
  - ratio
  - custom property
  - function
  
if.css:94:2 parse ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  × Expected a declaration, or an at rule but instead found ')'.
  
    92 │ 		style(--foo: bar) and (!bogus): red;
    93 │ 		else: blue;
  > 94 │ 	)
       │ 	^
    95 │ }
    96 │ 
  
  i Expected a declaration, or an at rule here.
  
    92 │ 		style(--foo: bar) and (!bogus): red;
    93 │ 		else: blue;
  > 94 │ 	)
       │ 	^
    95 │ }
    96 │ 
  
```

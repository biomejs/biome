---
source: crates/biome_js_analyze/tests/spec_tests.rs
expression: nested-expects.js
---
# Input
```js
/* should generate diagnostics */
// Test nested expect calls and chaining
test('nested not operator', async ({ page }) => {
    expect(page).not.toBeVisible();
});

test('chained not and soft', async ({ page }) => {
    expect.soft(page).not.toHaveText("foo");
});

test('multiple not calls', async ({ page }) => {
    expect(page).not.not.toBeEnabled();
});

```

# Diagnostics
```
nested-expects.js:4:5 lint/nursery/noPlaywrightMissingAwait  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Async matcher toBeVisible must be awaited or returned.
  
    2 │ // Test nested expect calls and chaining
    3 │ test('nested not operator', async ({ page }) => {
  > 4 │     expect(page).not.toBeVisible();
      │     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    5 │ });
    6 │ 
  
  i Add await before the expect call or return the promise.
  
  i Unsafe fix: Add await before the call.
  
    4 │ ····await·expect(page).not.toBeVisible();
      │     ++++++                               

```

```
nested-expects.js:8:5 lint/nursery/noPlaywrightMissingAwait  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Async matcher toHaveText must be awaited or returned.
  
     7 │ test('chained not and soft', async ({ page }) => {
   > 8 │     expect.soft(page).not.toHaveText("foo");
       │     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     9 │ });
    10 │ 
  
  i Add await before the expect call or return the promise.
  
  i Unsafe fix: Add await before the call.
  
    8 │ ····await·expect.soft(page).not.toHaveText("foo");
      │     ++++++                                        

```

```
nested-expects.js:12:5 lint/nursery/noPlaywrightMissingAwait  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Async matcher toBeEnabled must be awaited or returned.
  
    11 │ test('multiple not calls', async ({ page }) => {
  > 12 │     expect(page).not.not.toBeEnabled();
       │     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    13 │ });
    14 │ 
  
  i Add await before the expect call or return the promise.
  
  i Unsafe fix: Add await before the call.
  
    12 │ ····await·expect(page).not.not.toBeEnabled();
       │     ++++++                                   

```

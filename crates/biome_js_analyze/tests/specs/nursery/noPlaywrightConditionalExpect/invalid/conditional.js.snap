---
source: crates/biome_js_analyze/tests/spec_tests.rs
expression: conditional.js
---
# Input
```js
/* should generate diagnostics */

test("if statement", async ({ page }) => {
    if (someCondition) {
        await expect(page).toHaveTitle("Title");
    }
});

test("ternary", async ({ page }) => {
    someCondition ? await expect(page).toHaveTitle("Title") : null;
});

test("logical and", async ({ page }) => {
    someCondition && await expect(page).toHaveTitle("Title");
});

test("switch case", async ({ page }) => {
    switch (value) {
        case "a":
            await expect(page).toHaveTitle("Title");
            break;
    }
});

test("if with .not modifier", async ({ page }) => {
    if (someCondition) {
        await expect(page).not.toHaveTitle("Title");
    }
});

test("ternary with .not modifier", async ({ page }) => {
    someCondition ? await expect(page).not.toBeVisible() : null;
});

// .resolves modifier
test("if with .resolves", async ({ page }) => {
    if (someCondition) {
        await expect(fetchData()).resolves.toBeTruthy();
    }
});

// .rejects modifier
test("ternary with .rejects", async ({ page }) => {
    someCondition ? await expect(badRequest()).rejects.toThrow() : null;
});

// .poll() modifier
test("logical and with expect.poll", async ({ page }) => {
    someCondition && await expect.poll(() => getValue()).toBe(true);
});

// .soft() modifier
test("switch with expect.soft", async ({ page }) => {
    switch (value) {
        case "a":
            await expect.soft(page.locator("h1")).toBeVisible();
            break;
    }
});

// Chained modifiers: .resolves.not
test("if with .resolves.not", async ({ page }) => {
    if (someCondition) {
        await expect(fetchData()).resolves.not.toBeNull();
    }
});

// Chained modifiers: .rejects.not
test("ternary with .rejects.not", async ({ page }) => {
    someCondition ? await expect(badRequest()).rejects.not.toBeUndefined() : null;
});

// Chained modifiers: .soft().not
test("switch with expect.soft and .not", async ({ page }) => {
    switch (value) {
        case "a":
            await expect.soft(element).not.toBeHidden();
            break;
    }
});

// Catch clause
test("catch clause", async ({ page }) => {
    try {
        await page.click("button");
    } catch (e) {
        await expect(page).toHaveTitle("Title");
    }
});

```

# Diagnostics
```
conditional.js:5:15 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    3 │ test("if statement", async ({ page }) => {
    4 │     if (someCondition) {
  > 5 │         await expect(page).toHaveTitle("Title");
      │               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    6 │     }
    7 │ });
  
  i This expect() is inside a if statement, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:10:27 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
     9 │ test("ternary", async ({ page }) => {
  > 10 │     someCondition ? await expect(page).toHaveTitle("Title") : null;
       │                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    11 │ });
    12 │ 
  
  i This expect() is inside a ternary expression, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:14:28 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    13 │ test("logical and", async ({ page }) => {
  > 14 │     someCondition && await expect(page).toHaveTitle("Title");
       │                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    15 │ });
    16 │ 
  
  i This expect() is inside a logical expression, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:20:19 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    18 │     switch (value) {
    19 │         case "a":
  > 20 │             await expect(page).toHaveTitle("Title");
       │                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    21 │             break;
    22 │     }
  
  i This expect() is inside a switch case, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:27:15 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    25 │ test("if with .not modifier", async ({ page }) => {
    26 │     if (someCondition) {
  > 27 │         await expect(page).not.toHaveTitle("Title");
       │               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    28 │     }
    29 │ });
  
  i This expect() is inside a if statement, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:32:27 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    31 │ test("ternary with .not modifier", async ({ page }) => {
  > 32 │     someCondition ? await expect(page).not.toBeVisible() : null;
       │                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    33 │ });
    34 │ 
  
  i This expect() is inside a ternary expression, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:38:15 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    36 │ test("if with .resolves", async ({ page }) => {
    37 │     if (someCondition) {
  > 38 │         await expect(fetchData()).resolves.toBeTruthy();
       │               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    39 │     }
    40 │ });
  
  i This expect() is inside a if statement, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:44:27 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    42 │ // .rejects modifier
    43 │ test("ternary with .rejects", async ({ page }) => {
  > 44 │     someCondition ? await expect(badRequest()).rejects.toThrow() : null;
       │                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    45 │ });
    46 │ 
  
  i This expect() is inside a ternary expression, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:49:28 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    47 │ // .poll() modifier
    48 │ test("logical and with expect.poll", async ({ page }) => {
  > 49 │     someCondition && await expect.poll(() => getValue()).toBe(true);
       │                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    50 │ });
    51 │ 
  
  i This expect() is inside a logical expression, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:56:19 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    54 │     switch (value) {
    55 │         case "a":
  > 56 │             await expect.soft(page.locator("h1")).toBeVisible();
       │                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    57 │             break;
    58 │     }
  
  i This expect() is inside a switch case, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:64:15 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    62 │ test("if with .resolves.not", async ({ page }) => {
    63 │     if (someCondition) {
  > 64 │         await expect(fetchData()).resolves.not.toBeNull();
       │               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    65 │     }
    66 │ });
  
  i This expect() is inside a if statement, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:70:27 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    68 │ // Chained modifiers: .rejects.not
    69 │ test("ternary with .rejects.not", async ({ page }) => {
  > 70 │     someCondition ? await expect(badRequest()).rejects.not.toBeUndefined() : null;
       │                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    71 │ });
    72 │ 
  
  i This expect() is inside a ternary expression, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:77:19 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    75 │     switch (value) {
    76 │         case "a":
  > 77 │             await expect.soft(element).not.toBeHidden();
       │                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    78 │             break;
    79 │     }
  
  i This expect() is inside a switch case, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

```
conditional.js:87:15 lint/nursery/noPlaywrightConditionalExpect ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Unexpected conditional expect() call.
  
    85 │         await page.click("button");
    86 │     } catch (e) {
  > 87 │         await expect(page).toHaveTitle("Title");
       │               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    88 │     }
    89 │ });
  
  i This expect() is inside a catch clause, which means it may not always run.
  
  i Consider using test.skip() to conditionally skip the test, or restructure to avoid conditional expectations.
  
  i This rule belongs to the nursery group, which means it is not yet stable and may change in the future. Visit https://biomejs.dev/linter/#nursery for more information.
  

```

---
source: crates/biome_js_analyze/tests/spec_tests.rs
expression: invalid.js
---
# Input
```js
// Safe defaults - should report

// Object literals
const config = options || {};
const settings = prefs || { theme: 'dark' };

// Array literals
const items = list || [];
const values = data || [1, 2, 3];

// Non-empty string literals
const name = input || 'Anonymous';
const message = text || "default message";

// Template literals with content
const greeting = name || `Hello ${user}`;

// Function expressions
const handler = callback || function() {};
const process = fn || (() => {});

// Class expressions
const Component = CustomClass || class {};

// new expressions
const instance = existing || new Map();
const date = d || new Date();

// Member access (suggests object expected)
const value = config || defaults.value;
const item = cache || storage.getItem('key');

// Nested safe defaults
const nested = a || (b || {});

// In various contexts
let result;
result = foo || {};

function test(param) {
  return param || [];
}

const fn = (x) => x || 'default';

const obj = {
  prop: value || {}
};

const arr = [x || []];

const computed = (x || 'fallback').length;

```

# Diagnostics
```
invalid.js:4:24 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    3 │ // Object literals
  > 4 │ const config = options || {};
      │                        ^^
    5 │ const settings = prefs || { theme: 'dark' };
    6 │ 
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
     2  2 │   
     3  3 │   // Object literals
     4    │ - const·config·=·options·||·{};
        4 │ + const·config·=·options·??·{};
     5  5 │   const settings = prefs || { theme: 'dark' };
     6  6 │   
  

```

```
invalid.js:5:24 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    3 │ // Object literals
    4 │ const config = options || {};
  > 5 │ const settings = prefs || { theme: 'dark' };
      │                        ^^
    6 │ 
    7 │ // Array literals
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
     3  3 │   // Object literals
     4  4 │   const config = options || {};
     5    │ - const·settings·=·prefs·||·{·theme:·'dark'·};
        5 │ + const·settings·=·prefs·??·{·theme:·'dark'·};
     6  6 │   
     7  7 │   // Array literals
  

```

```
invalid.js:8:20 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
     7 │ // Array literals
   > 8 │ const items = list || [];
       │                    ^^
     9 │ const values = data || [1, 2, 3];
    10 │ 
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
     6  6 │   
     7  7 │   // Array literals
     8    │ - const·items·=·list·||·[];
        8 │ + const·items·=·list·??·[];
     9  9 │   const values = data || [1, 2, 3];
    10 10 │   
  

```

```
invalid.js:9:21 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
     7 │ // Array literals
     8 │ const items = list || [];
   > 9 │ const values = data || [1, 2, 3];
       │                     ^^
    10 │ 
    11 │ // Non-empty string literals
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
     7  7 │   // Array literals
     8  8 │   const items = list || [];
     9    │ - const·values·=·data·||·[1,·2,·3];
        9 │ + const·values·=·data·??·[1,·2,·3];
    10 10 │   
    11 11 │   // Non-empty string literals
  

```

```
invalid.js:12:20 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    11 │ // Non-empty string literals
  > 12 │ const name = input || 'Anonymous';
       │                    ^^
    13 │ const message = text || "default message";
    14 │ 
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    10 10 │   
    11 11 │   // Non-empty string literals
    12    │ - const·name·=·input·||·'Anonymous';
       12 │ + const·name·=·input·??·'Anonymous';
    13 13 │   const message = text || "default message";
    14 14 │   
  

```

```
invalid.js:13:22 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    11 │ // Non-empty string literals
    12 │ const name = input || 'Anonymous';
  > 13 │ const message = text || "default message";
       │                      ^^
    14 │ 
    15 │ // Template literals with content
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    11 11 │   // Non-empty string literals
    12 12 │   const name = input || 'Anonymous';
    13    │ - const·message·=·text·||·"default·message";
       13 │ + const·message·=·text·??·"default·message";
    14 14 │   
    15 15 │   // Template literals with content
  

```

```
invalid.js:16:23 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    15 │ // Template literals with content
  > 16 │ const greeting = name || `Hello ${user}`;
       │                       ^^
    17 │ 
    18 │ // Function expressions
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    14 14 │   
    15 15 │   // Template literals with content
    16    │ - const·greeting·=·name·||·`Hello·${user}`;
       16 │ + const·greeting·=·name·??·`Hello·${user}`;
    17 17 │   
    18 18 │   // Function expressions
  

```

```
invalid.js:19:26 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    18 │ // Function expressions
  > 19 │ const handler = callback || function() {};
       │                          ^^
    20 │ const process = fn || (() => {});
    21 │ 
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    17 17 │   
    18 18 │   // Function expressions
    19    │ - const·handler·=·callback·||·function()·{};
       19 │ + const·handler·=·callback·??·function()·{};
    20 20 │   const process = fn || (() => {});
    21 21 │   
  

```

```
invalid.js:20:20 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    18 │ // Function expressions
    19 │ const handler = callback || function() {};
  > 20 │ const process = fn || (() => {});
       │                    ^^
    21 │ 
    22 │ // Class expressions
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    18 18 │   // Function expressions
    19 19 │   const handler = callback || function() {};
    20    │ - const·process·=·fn·||·(()·=>·{});
       20 │ + const·process·=·fn·??·(()·=>·{});
    21 21 │   
    22 22 │   // Class expressions
  

```

```
invalid.js:23:31 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    22 │ // Class expressions
  > 23 │ const Component = CustomClass || class {};
       │                               ^^
    24 │ 
    25 │ // new expressions
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    21 21 │   
    22 22 │   // Class expressions
    23    │ - const·Component·=·CustomClass·||·class·{};
       23 │ + const·Component·=·CustomClass·??·class·{};
    24 24 │   
    25 25 │   // new expressions
  

```

```
invalid.js:26:27 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    25 │ // new expressions
  > 26 │ const instance = existing || new Map();
       │                           ^^
    27 │ const date = d || new Date();
    28 │ 
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    24 24 │   
    25 25 │   // new expressions
    26    │ - const·instance·=·existing·||·new·Map();
       26 │ + const·instance·=·existing·??·new·Map();
    27 27 │   const date = d || new Date();
    28 28 │   
  

```

```
invalid.js:27:16 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    25 │ // new expressions
    26 │ const instance = existing || new Map();
  > 27 │ const date = d || new Date();
       │                ^^
    28 │ 
    29 │ // Member access (suggests object expected)
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    25 25 │   // new expressions
    26 26 │   const instance = existing || new Map();
    27    │ - const·date·=·d·||·new·Date();
       27 │ + const·date·=·d·??·new·Date();
    28 28 │   
    29 29 │   // Member access (suggests object expected)
  

```

```
invalid.js:30:22 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    29 │ // Member access (suggests object expected)
  > 30 │ const value = config || defaults.value;
       │                      ^^
    31 │ const item = cache || storage.getItem('key');
    32 │ 
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    28 28 │   
    29 29 │   // Member access (suggests object expected)
    30    │ - const·value·=·config·||·defaults.value;
       30 │ + const·value·=·config·??·defaults.value;
    31 31 │   const item = cache || storage.getItem('key');
    32 32 │   
  

```

```
invalid.js:34:24 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    33 │ // Nested safe defaults
  > 34 │ const nested = a || (b || {});
       │                        ^^
    35 │ 
    36 │ // In various contexts
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    32 32 │   
    33 33 │   // Nested safe defaults
    34    │ - const·nested·=·a·||·(b·||·{});
       34 │ + const·nested·=·a·||·(b·??·{});
    35 35 │   
    36 36 │   // In various contexts
  

```

```
invalid.js:38:14 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    36 │ // In various contexts
    37 │ let result;
  > 38 │ result = foo || {};
       │              ^^
    39 │ 
    40 │ function test(param) {
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    36 36 │   // In various contexts
    37 37 │   let result;
    38    │ - result·=·foo·||·{};
       38 │ + result·=·foo·??·{};
    39 39 │   
    40 40 │   function test(param) {
  

```

```
invalid.js:41:16 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    40 │ function test(param) {
  > 41 │   return param || [];
       │                ^^
    42 │ }
    43 │ 
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    39 39 │   
    40 40 │   function test(param) {
    41    │ - ··return·param·||·[];
       41 │ + ··return·param·??·[];
    42 42 │   }
    43 43 │   
  

```

```
invalid.js:44:21 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    42 │ }
    43 │ 
  > 44 │ const fn = (x) => x || 'default';
       │                     ^^
    45 │ 
    46 │ const obj = {
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    42 42 │   }
    43 43 │   
    44    │ - const·fn·=·(x)·=>·x·||·'default';
       44 │ + const·fn·=·(x)·=>·x·??·'default';
    45 45 │   
    46 46 │   const obj = {
  

```

```
invalid.js:47:15 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    46 │ const obj = {
  > 47 │   prop: value || {}
       │               ^^
    48 │ };
    49 │ 
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    45 45 │   
    46 46 │   const obj = {
    47    │ - ··prop:·value·||·{}
       47 │ + ··prop:·value·??·{}
    48 48 │   };
    49 49 │   
  

```

```
invalid.js:50:16 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    48 │ };
    49 │ 
  > 50 │ const arr = [x || []];
       │                ^^
    51 │ 
    52 │ const computed = (x || 'fallback').length;
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    48 48 │   };
    49 49 │   
    50    │ - const·arr·=·[x·||·[]];
       50 │ + const·arr·=·[x·??·[]];
    51 51 │   
    52 52 │   const computed = (x || 'fallback').length;
  

```

```
invalid.js:52:21 lint/style/useNullishCoalescing  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  i Prefer ?? over || for default values.
  
    50 │ const arr = [x || []];
    51 │ 
  > 52 │ const computed = (x || 'fallback').length;
       │                     ^^
    53 │ 
  
  i Using ?? ensures that only null and undefined trigger the fallback, preserving intentional falsy values like 0 or empty strings.
  
  i Safe fix: Use ?? instead.
  
    50 50 │   const arr = [x || []];
    51 51 │   
    52    │ - const·computed·=·(x·||·'fallback').length;
       52 │ + const·computed·=·(x·??·'fallback').length;
    53 53 │   
  

```

---
title: 分析器
description: Biome 分析器提供的内容
---

Biome 的分析器提供了一系列用户可以利用的功能。

## 导入排序

Biome 允许使用 [自然排序](https://en.wikipedia.org/wiki/Natural_sort_order) 对导入语句进行排序。

此功能默认启用，但可以通过配置选择退出：

```json title="biome.json"
{
  "organizeImports": {
    "enabled": false
  }
}
```

### 导入如何排序

导入语句按照 "距离" 排序。距用户 "更远" 的模块放在顶部，距用户 "更近" 的模块放在底部：

1. 通过 `bun:` 协议导入的模块。这适用于编写由 Bun 运行的代码；
2. 使用 `node:` 协议明确导入的内置 Node.js 模块和常见的 Node 内置模块，如 `assert`；
3. 通过 `npm:` 协议导入的模块。这适用于编写由 Deno 运行的代码；
4. 通过 URL 导入的模块；
5. 从库中导入的模块；
6. 通过绝对导入导入的模块；
7. 从以 `#` 为前缀的名称导入的模块。这适用于使用 [Node 的子路径导入](https://nodejs.org/api/packages.html#subpath-imports)；
8. 通过相对导入导入的模块；
9. 未能通过前述标准识别的模块；

例如，给定以下代码：

```ts title="example.ts"
import uncle from "../uncle";
import sibling from "./sibling";
import express from "npm:express";
import imageUrl from "url:./image.png";
import assert from "node:assert";
import aunt from "../aunt";
import { VERSION } from "https://deno.land/std/version.ts";
import { mock, test } from "node:test";
import { expect } from "bun:test";
import { internal } from "#internal";
import { secret } from "/absolute/path";
import React from "react";
```

它们将被排序如下：

```ts title="example.ts"
 import { expect } from "bun:test";
 import assert from "node:assert";
 import { mock, test } from "node:test";
 import express from "npm:express";
 import { VERSION } from "https://deno.land/std/version.ts";
 import React from "react";
 import { secret } from "/absolute/path";
 import { internal } from "#internal";
 import aunt from "../aunt";
 import uncle from "../uncle";
 import sibling from "./sibling";
 import imageUrl from "url:./image.png";
```

您可以通过两种方式应用排序：通过 [CLI](#import-sorting-via-cli) 或 [VSCode 扩展](#import-sorting-via-vscode-extension)。

### 分组导入

在某种顺序中有导入语句是很普遍的，主要是当你在一个前端项目上工作，并且你导入 CSS 文件：

```js title="example.js"
import "../styles/reset.css";
import "../styles/layout.css";
import { Grid } from "../components/Grid.jsx";
```

另一个常见的情况是导入 polyfills 或 shim 文件，这些文件需要保持在文件的顶部：

```js title="example.js"
import "../polyfills/array/flatMap";
import { functionThatUsesFlatMap } from "./utils.js";
```

在这些情况下，Biome 将对这三个导入进行排序，可能会导致应用程序的顺序**破裂**。

为了避免这种情况，创建一个导入的 "组"。您可以通过添加**新行**来分隔组来创建 "组"。

这样做，Biome 将只对属于同一组的导入语句进行排序：

```js title="example.js"
// 组 1，只有这两个文件会被排序
import "../styles/reset.css";
import "../styles/layout.css";

// 组 2，只有这一个被排序
import { Grid } from "../components/Grid.jsx";
```

```js title="example.js"
// 组 1，polyfill/shim
import "../polyfills/array/flatMap";

// 组 2，需要 polyfill/shim 的文件
import { functionThatUsesFlatMap } from "./utils.js";
```

### 通过 CLI 进行导入排序

使用命令 `check`，带有选项 `--apply`。

```shell
biome check --apply ./path/to/src
```

### 通过 VSCode 扩展进行导入排序

Biome 的 VS Code 扩展通过 "Organize Imports" 代码操作支持导入排序。
默认情况下，可以使用 <kbd title="Shift">⇧</kbd>+<kbd>Alt</kbd>+<kbd>O</kbd> 键盘快捷键运行此操作，或通过 _Command Palette_ (<kbd>Ctrl</kbd>/<kbd title="Cmd">⌘</kbd>+<kbd title="Shift">⇧</kbd>+<kbd>P</kbd>) 选择 _Organize Imports_。

如果你希望此操作在保存时自动运行，而不是手动调用，可以将以下内容添加到你的编辑器配置中：

```json title="biome.json"
{
	"editor.codeActionsOnSave":{
		"source.organizeImports.biome": true
	}
}
```
